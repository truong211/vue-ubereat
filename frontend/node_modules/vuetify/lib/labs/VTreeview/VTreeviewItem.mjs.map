{"version":3,"file":"VTreeviewItem.mjs","names":["VBtn","VListItemAction","makeVListItemProps","VListItem","VProgressCircular","IconValue","computed","inject","ref","toRaw","EventProp","genericComponent","omit","propsFactory","useRender","VTreeviewSymbol","makeVTreeviewItemProps","loading","Boolean","onToggleExpand","toggleIcon","slim","VTreeviewItem","name","props","setup","_ref","slots","visibleIds","vListItemRef","isActivatableGroupActivator","value","root","activatable","isGroupActivator","vListItemRefIsClickable","link","isClickable","list","disabled","isFiltered","has","id","activateGroupActivator","e","activate","isActivated","listItemProps","filterProps","hasPrepend","prepend","_createVNode","_mergeProps","class","onClick","slotProps","_Fragment","default","loader","undefined"],"sources":["../../../src/labs/VTreeview/VTreeviewItem.tsx"],"sourcesContent":["// Styles\nimport './VTreeviewItem.sass'\n\n// Components\nimport { VBtn } from '@/components/VBtn'\nimport { VListItemAction } from '@/components/VList'\nimport { makeVListItemProps, VListItem } from '@/components/VList/VListItem'\nimport { VProgressCircular } from '@/components/VProgressCircular'\n\n// Composables\nimport { IconValue } from '@/composables/icons'\n\n// Utilities\nimport { computed, inject, ref, toRaw } from 'vue'\nimport { EventProp, genericComponent, omit, propsFactory, useRender } from '@/util'\n\n// Types\nimport { VTreeviewSymbol } from './shared'\nimport type { VListItemSlots } from '@/components/VList/VListItem'\n\nexport const makeVTreeviewItemProps = propsFactory({\n  loading: Boolean,\n  onToggleExpand: EventProp<[MouseEvent]>(),\n  toggleIcon: IconValue,\n\n  ...makeVListItemProps({ slim: true }),\n}, 'VTreeviewItem')\n\nexport const VTreeviewItem = genericComponent<VListItemSlots>()({\n  name: 'VTreeviewItem',\n\n  props: makeVTreeviewItemProps(),\n\n  setup (props, { slots }) {\n    const visibleIds = inject(VTreeviewSymbol, { visibleIds: ref() }).visibleIds\n\n    const vListItemRef = ref<VListItem>()\n\n    const isActivatableGroupActivator = computed(() =>\n      (vListItemRef.value?.root.activatable.value) &&\n      vListItemRef.value?.isGroupActivator\n    )\n    const vListItemRefIsClickable = computed(() => (\n      vListItemRef.value?.link.isClickable.value ||\n      (props.value != null && !!vListItemRef.value?.list)\n    ))\n    const isClickable = computed(() =>\n      !props.disabled &&\n      props.link !== false &&\n      (props.link || vListItemRefIsClickable.value || isActivatableGroupActivator.value)\n    )\n    const isFiltered = computed(() => visibleIds.value && !visibleIds.value.has(toRaw(vListItemRef.value?.id)))\n\n    function activateGroupActivator (e: MouseEvent | KeyboardEvent) {\n      if (isClickable.value && isActivatableGroupActivator.value) {\n        vListItemRef.value?.activate(!vListItemRef.value?.isActivated, e)\n      }\n    }\n\n    useRender(() => {\n      const listItemProps = omit(VListItem.filterProps(props), ['onClick'])\n      const hasPrepend = slots.prepend || props.toggleIcon\n\n      return (\n        <VListItem\n          ref={ vListItemRef }\n          { ...listItemProps }\n          active={ vListItemRef.value?.isActivated }\n          class={[\n            'v-treeview-item',\n            {\n              'v-treeview-item--activatable-group-activator': isActivatableGroupActivator.value,\n              'v-treeview-item--filtered': isFiltered.value,\n            },\n            props.class,\n          ]}\n          ripple={ false }\n          onClick={ props.onClick ?? activateGroupActivator }\n        >\n          {{\n            ...slots,\n            prepend: hasPrepend ? slotProps => {\n              return (\n                <>\n                  <VListItemAction start={ false }>\n                    { props.toggleIcon && (\n                        <VBtn\n                          density=\"compact\"\n                          icon={ props.toggleIcon }\n                          loading={ props.loading }\n                          variant=\"text\"\n                          onClick={ props.onToggleExpand }\n                        >\n                          {{\n                            loader () {\n                              return (\n                                <VProgressCircular\n                                  indeterminate=\"disable-shrink\"\n                                  size=\"20\"\n                                  width=\"2\"\n                                />\n                              )\n                            },\n                          }}\n                        </VBtn>\n                    )}\n                  </VListItemAction>\n\n                  { slots.prepend?.(slotProps) }\n                </>\n              )\n            } : undefined,\n          }}\n        </VListItem>\n      )\n    })\n\n    return {}\n  },\n})\n\nexport type VTreeviewItem = InstanceType<typeof VTreeviewItem>\n"],"mappings":"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","ignoreList":[]}